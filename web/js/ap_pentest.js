/* This Javascript contains features to identify which test should be performed. */

/** 
 * Button Handlers
 */
/* Final Agree Button Handler */
$('#agree_terms_button').click(function () {
	var test_type  = $('#type_test').val();
	var test_url   = $('#search_text').val();
	var test_item1 = $('#html_id_1').val();
	var test_item2 = $('#html_id_2').val();
	
	/* Test Type wasn't selected. */ 
	if (test_type == null) {
		alert('Please select a valid test from the dropdown.');
	}
	/* ZAP Test Option. */
	else if (test_type == 1) { // ZAP test
		if (test_url == '')
			alert('Please enter a valid URL to test.');
		else {
			socket.emit('test_zap', { url: test_url });
			changeView('test');
		}
	}
	/* SQLMAP Test Option. */
	else if (test_type == 2) {
		if (test_url == '' || (test_item1 == '' && test_item2 == ''))
			alert('Please enter a valid URL with at least one field to test.');
		else {
			socket.emit('test_sqlmap', {
				url  : test_url,
				item1: test_item1,
				item2: test_item2
			});
			changeView('test');
		}
	}
});
/* Cancel Test Button Handler */
$('#cancelButton').click(function () {
	changeView('panel');
	socket.emit('test_cancel');
});
/* Back To User Panel Button Handler */
$('#backButton').click(function () {
	changeView('panel');
});